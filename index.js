(function(){"use strict";const W="";function u(s,t,e,n,i,o,d,K){var a=typeof s=="function"?s.options:s;t&&(a.render=t,a.staticRenderFns=e,a._compiled=!0),n&&(a.functional=!0),o&&(a._scopeId="data-v-"+o);var l;if(d?(l=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),i&&i.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(d)},a._ssrRegister=l):i&&(l=K?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(a.functional){a._injectStyles=l;var M=a.render;a.render=function(P,y){return l.call(y),M(P,y)}}else{var v=a.beforeCreate;a.beforeCreate=v?[].concat(v,l):[l]}return{exports:s,options:a}}const k={props:{blocks:Array,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,id:String,isSelected:Boolean,width:String}};var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"k-column k-layout-column",attrs:{id:t.id,"data-width":t.width,tabindex:"0"},on:{dblclick:function(n){return t.$refs.blocks.choose(t.blocks.length)}}},[e("k-blocks",{ref:"blocks",attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,value:t.blocks,group:"layout"},on:{input:function(n){return t.$emit("input",n)}},nativeOn:{dblclick:function(n){n.stopPropagation()}}})],1)},$=[],h=u(k,m,$,!1,null,null,null,null);const f=h.exports,q="",b={components:{"k-layout-column":f},props:{attrs:[Array,Object],columns:Array,disabled:Boolean,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,id:String,isSelected:Boolean,settings:Object},computed:{tabs(){let s=this.settings.tabs;return Object.entries(s).forEach(([t,e])=>{Object.entries(e.fields).forEach(([n])=>{s[t].fields[n].endpoints={field:this.endpoints.field+"/fields/"+n,section:this.endpoints.section,model:this.endpoints.model}})}),s}}};var g=function(){var t=this,e=t._self._c;return e("section",{staticClass:"k-layout",attrs:{"data-selected":t.isSelected,tabindex:"0"},on:{click:function(n){return t.$emit("select")}}},[e("k-grid",{staticClass:"k-layout-columns"},t._l(t.columns,function(n,i){return e("k-layout-column",t._b({key:n.id,attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets},on:{input:function(o){return t.$emit("updateColumn",{column:n,columnIndex:i,blocks:o})}}},"k-layout-column",n,!1))}),1),t.disabled?t._e():e("nav",{staticClass:"k-layout-toolbar"},[t.settings?e("k-button",{staticClass:"k-layout-toolbar-button",attrs:{tooltip:t.$t("settings"),icon:"settings"},on:{click:function(n){return t.$refs.drawer.open()}}}):t._e(),e("k-dropdown",[e("k-button",{staticClass:"k-layout-toolbar-button",attrs:{icon:"angle-down"},on:{click:function(n){return t.$refs.options.toggle()}}}),e("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[e("k-dropdown-item",{attrs:{icon:"angle-up"},on:{click:function(n){return t.$emit("prepend")}}},[t._v(" "+t._s(t.$t("insert.before"))+" ")]),e("k-dropdown-item",{attrs:{icon:"angle-down"},on:{click:function(n){return t.$emit("append")}}},[t._v(" "+t._s(t.$t("insert.after"))+" ")]),e("hr"),t.settings?e("k-dropdown-item",{attrs:{icon:"settings"},on:{click:function(n){return t.$refs.drawer.open()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]):t._e(),e("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(n){return t.$emit("duplicate")}}},[t._v(" "+t._s(t.$t("duplicate"))+" ")]),e("hr"),e("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(n){return t.$refs.confirmRemoveDialog.open()}}},[t._v(" "+t._s(t.$t("field.layout.delete"))+" ")])],1)],1),e("k-sort-handle")],1),t.settings?e("k-form-drawer",{ref:"drawer",staticClass:"k-layout-drawer",attrs:{tabs:t.tabs,title:t.$t("settings"),value:t.attrs,icon:"settings"},on:{input:function(n){return t.$emit("updateAttrs",n)}}}):t._e(),e("k-remove-dialog",{ref:"confirmRemoveDialog",attrs:{text:t.$t("field.layout.delete.confirm")},on:{submit:function(n){return t.$emit("remove")}}})],1)},w=[],L=u(b,g,w,!1,null,null,null,null);const _=L.exports,p={computed:{layoutEditingIsDisabled(){return this.disabled==!0?!0:this.$root.$language?!this.$root.$language.default:!1}}},H="",C={extends:_,components:{"k-layout-column":f},mixins:[p]};var O=function(){var t=this,e=t._self._c;return e("section",{staticClass:"k-layout",attrs:{"data-selected":t.isSelected,tabindex:"0"},on:{click:function(n){return t.$emit("select")}}},[e("k-grid",{staticClass:"k-layout-columns"},t._l(t.columns,function(n,i){return e("k-layout-column",t._b({key:n.id,attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets},on:{input:function(o){return t.$emit("updateColumn",{column:n,columnIndex:i,blocks:o})}}},"k-layout-column",n,!1))}),1),t.disabled?t._e():e("nav",{staticClass:"k-layout-toolbar"},[t.settings?e("k-button",{staticClass:"k-layout-toolbar-button",attrs:{tooltip:t.$t("settings"),icon:"settings"},on:{click:function(n){return t.$refs.drawer.open()}}}):t._e(),t.layoutEditingIsDisabled?t._e():e("k-dropdown",[e("k-button",{staticClass:"k-layout-toolbar-button",attrs:{icon:"angle-down"},on:{click:function(n){return t.$refs.options.toggle()}}}),e("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[e("k-dropdown-item",{attrs:{icon:"angle-up"},on:{click:function(n){return t.$emit("prepend")}}},[t._v(" "+t._s(t.$t("insert.before"))+" ")]),e("k-dropdown-item",{attrs:{icon:"angle-down"},on:{click:function(n){return t.$emit("append")}}},[t._v(" "+t._s(t.$t("insert.after"))+" ")]),e("hr"),t.settings?e("k-dropdown-item",{attrs:{icon:"settings"},on:{click:function(n){return t.$refs.drawer.open()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]):t._e(),e("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(n){return t.$emit("duplicate")}}},[t._v(" "+t._s(t.$t("duplicate"))+" ")]),e("hr"),e("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(n){return t.$refs.confirmRemoveDialog.open()}}},[t._v(" "+t._s(t.$t("field.layout.delete"))+" ")])],1)],1),t.layoutEditingIsDisabled?t._e():e("k-sort-handle")],1),t.settings?e("k-form-drawer",{ref:"drawer",staticClass:"k-layout-drawer",attrs:{tabs:t.tabs,title:t.$t("settings"),value:t.attrs,icon:"settings"},on:{input:function(n){return t.$emit("updateAttrs",n)}}}):t._e(),e("k-remove-dialog",{ref:"confirmRemoveDialog",attrs:{text:t.$t("field.layout.delete.confirm")},on:{submit:function(n){return t.$emit("remove")}}})],1)},x=[],R=u(C,O,x,!1,null,null,null,null);const D=R.exports,J="",E={components:{"k-layout":_},props:{disabled:Boolean,empty:String,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,layouts:Array,max:Number,settings:Object,value:Array},data(){return{currentLayout:null,nextIndex:null,rows:this.value,selected:null}},computed:{draggableOptions(){return{id:this._uid,handle:!0,list:this.rows}}},watch:{value(){this.rows=this.value}},methods:{async addLayout(s){let t=await this.$api.post(this.endpoints.field+"/layout",{columns:s});this.rows.splice(this.nextIndex,0,t),this.layouts.length>1&&this.$refs.selector.close(),this.save()},duplicateLayout(s,t){let e={...this.$helper.clone(t),id:this.$helper.uuid()};e.columns=e.columns.map(n=>(n.id=this.$helper.uuid(),n.blocks=n.blocks.map(i=>(i.id=this.$helper.uuid(),i)),n)),this.rows.splice(s+1,0,e),this.save()},removeLayout(s){const t=this.rows.findIndex(e=>e.id===s.id);t!==-1&&this.$delete(this.rows,t),this.save()},save(){this.$emit("input",this.rows)},selectLayout(s){if(this.nextIndex=s,this.layouts.length===1){this.addLayout(this.layouts[0]);return}this.$refs.selector.open()},updateColumn(s){this.rows[s.layoutIndex].columns[s.columnIndex].blocks=s.blocks,this.save()},updateAttrs(s,t){this.rows[s].attrs=t,this.save()}}};var j=function(){var t=this,e=t._self._c;return e("div",[t.rows.length?[e("k-draggable",t._b({staticClass:"k-layouts",on:{sort:t.save}},"k-draggable",t.draggableOptions,!1),t._l(t.rows,function(n,i){return e("k-layout",t._b({key:n.id,attrs:{disabled:t.disabled,endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,"is-selected":t.selected===n.id,settings:t.settings},on:{append:function(o){return t.selectLayout(i+1)},duplicate:function(o){return t.duplicateLayout(i,n)},prepend:function(o){return t.selectLayout(i)},remove:function(o){return t.removeLayout(n)},select:function(o){t.selected=n.id},updateAttrs:function(o){return t.updateAttrs(i,o)},updateColumn:function(o){return t.updateColumn({layout:n,layoutIndex:i,...o})}}},"k-layout",n,!1))}),1),t.disabled?t._e():e("k-button",{staticClass:"k-layout-add-button",attrs:{icon:"add"},on:{click:function(n){return t.selectLayout(t.rows.length)}}})]:[e("k-empty",{staticClass:"k-layout-empty",attrs:{icon:"dashboard"},on:{click:function(n){return t.selectLayout(0)}}},[t._v(" "+t._s(t.empty||t.$t("field.layout.empty"))+" ")])],e("k-dialog",{ref:"selector",staticClass:"k-layout-selector",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[e("k-headline",[t._v(t._s(t.$t("field.layout.select")))]),e("ul",t._l(t.layouts,function(n,i){return e("li",{key:i,staticClass:"k-layout-selector-option"},[e("k-grid",{nativeOn:{click:function(o){return t.addLayout(n)}}},t._l(n,function(o,d){return e("k-column",{key:d,attrs:{width:o}})}),1)],1)}),0)],1)],2)},A=[],T=u(E,j,A,!1,null,null,null,null);const c=T.exports,Q="",N={extends:c,components:{"k-translated-layout":D},mixins:[p],mounted:function(){this.addLayoutNative=c.methods.addLayout,this.removeLayoutNative=c.methods.removeLayout,this.duplicateLayoutNative=c.methods.duplicateLayout,this.selectLayoutNative=c.methods.selectLayout},methods:{async addLayout(s){return this.layoutEditingIsDisabled?null:this.addLayoutNative(s)},duplicateLayout(s,t){return this.layoutEditingIsDisabled?null:this.duplicateLayoutNative(s,t)},removeLayout(s){return this.layoutEditingIsDisabled?null:this.removeLayoutNative(s)},selectLayout(s){return this.layoutEditingIsDisabled?null:this.selectLayoutNative(s)}}};var S=function(){var t=this,e=t._self._c;return e("div",[t.rows.length?[e("k-draggable",t._b({staticClass:"k-layouts",on:{sort:t.save}},"k-draggable",t.draggableOptions,!1),t._l(t.rows,function(n,i){return e("k-translated-layout",t._b({key:n.id,attrs:{disabled:t.disabled,endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,"is-selected":t.selected===n.id,settings:t.settings},on:{append:function(o){return t.selectLayout(i+1)},duplicate:function(o){return t.duplicateLayout(i,n)},prepend:function(o){return t.selectLayout(i)},remove:function(o){return t.removeLayout(n)},select:function(o){t.selected=n.id},updateAttrs:function(o){return t.updateAttrs(i,o)},updateColumn:function(o){return t.updateColumn({layout:n,layoutIndex:i,...o})}}},"k-translated-layout",n,!1))}),1),t.layoutEditingIsDisabled?t._e():e("k-button",{staticClass:"k-layout-add-button",attrs:{icon:"add"},on:{click:function(n){return t.selectLayout(t.rows.length)}}})]:[e("k-empty",{staticClass:"k-layout-empty",attrs:{icon:"dashboard"},on:{click:function(n){return t.selectLayout(0)}}},[t._v(" "+t._s(t.empty||t.$t("field.layout.empty"))+" ")])],e("k-dialog",{ref:"selector",staticClass:"k-layout-selector",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[e("k-headline",[t._v(t._s(t.$t("field.layout.select")))]),e("ul",t._l(t.layouts,function(n,i){return e("li",{key:i,staticClass:"k-layout-selector-option"},[e("k-grid",{nativeOn:{click:function(o){return t.addLayout(n)}}},t._l(n,function(o,d){return e("k-column",{key:d,attrs:{width:o}})}),1)],1)}),0)],1)],2)},F=[],G=u(N,S,F,!1,null,null,null,null);const I=G.exports,Y="",B={extends:"k-layout-field",components:{"k-translated-block-layouts":I},computed:{layoutEditingIsDisabled(){return this.$root.$language?!this.$root.$language.default:!1}}};var z=function(){var t=this,e=t._self._c;return e("k-field",t._b({class:{"k-translated-layout-field":!0,"k-layout-field":!0,"layouts-disabled":t.layoutEditingIsDisabled}},"k-field",t.$props,!1),[e("k-translated-block-layouts",t._b({on:{input:function(n){return t.$emit("input",n)}}},"k-translated-block-layouts",t.$props,!1))],1)},U=[],V=u(B,z,U,!1,null,null,null,null);const X=V.exports;panel.plugin("daandelange/translatedlayout",{components:{},fields:{translatedlayout:X}})})();
