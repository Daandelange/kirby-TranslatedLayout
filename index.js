(function(){"use strict";const nt="";function r(s,t,n,e,i,o,p,Z){var a=typeof s=="function"?s.options:s;t&&(a.render=t,a.staticRenderFns=n,a._compiled=!0),e&&(a.functional=!0),o&&(a._scopeId="data-v-"+o);var d;if(p?(d=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),i&&i.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(p)},a._ssrRegister=d):i&&(d=Z?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(a.functional){a._injectStyles=d;var tt=a.render;a.render=function(et,m){return d.call(m),tt(et,m)}}else{var _=a.beforeCreate;a.beforeCreate=_?[].concat(_,d):[d]}return{exports:s,options:a}}const f={props:{endpoints:Object,fieldsetGroups:Object,fieldsets:Object,id:String,isSelected:Boolean}},k={mixins:[f],props:{blocks:Array,width:{type:String,default:"1/1"}},emits:["input"]};var y=function(){var t=this,n=t._self._c;return n("div",{staticClass:"k-column k-layout-column",style:{"--width":t.width},attrs:{id:t.id,tabindex:"0"},on:{dblclick:function(e){return t.$refs.blocks.choose(t.blocks.length)}}},[n("k-blocks",t._b({ref:"blocks",on:{input:function(e){return t.$emit("input",e)}},nativeOn:{dblclick:function(e){e.stopPropagation()}}},"k-blocks",{endpoints:t.endpoints,fieldsets:t.fieldsets,fieldsetGroups:t.fieldsetGroups,group:"layout",value:t.blocks},!1))],1)},v=[],b=r(k,y,v,!1,null,null,null,null);const h=b.exports,g={props:{disabled:Boolean}},st="",$={mixins:[{mixins:[f,g],props:{columns:Array,layouts:{type:Array,default:()=>[["1/1"]]},settings:Object}}],props:{attrs:[Array,Object]},emits:["append","change","copy","duplicate","prepend","remove","select","updateAttrs","updateColumn"],computed:{options(){return[{click:()=>this.$emit("prepend"),icon:"angle-up",text:this.$t("insert.before")},{click:()=>this.$emit("append"),icon:"angle-down",text:this.$t("insert.after")},"-",{click:()=>this.openSettings(),icon:"settings",text:this.$t("settings"),when:this.$helper.object.isEmpty(this.settings)===!1},{click:()=>this.$emit("duplicate"),icon:"copy",text:this.$t("duplicate")},{click:()=>this.$emit("change"),disabled:this.layouts.length===1,icon:"dashboard",text:this.$t("field.layout.change")},"-",{click:()=>this.$emit("copy"),icon:"template",text:this.$t("copy")},{click:()=>this.$emit("paste"),icon:"download",text:this.$t("paste.after")},"-",{click:()=>this.remove(),icon:"trash",text:this.$t("field.layout.delete")}]},tabs(){let s=this.settings.tabs;for(const[t,n]of Object.entries(s))for(const e in n.fields)s[t].fields[e].endpoints={field:this.endpoints.field+"/fields/"+e,section:this.endpoints.section,model:this.endpoints.model};return s}},methods:{openSettings(){this.$panel.drawer.open({component:"k-form-drawer",props:{icon:"settings",tabs:this.tabs,title:this.$t("settings"),value:this.attrs},on:{input:s=>this.$emit("updateAttrs",s)}})},remove(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("field.layout.delete.confirm")},on:{submit:()=>{this.$emit("remove"),this.$panel.dialog.close()}}})}}};var C=function(){var t=this,n=t._self._c;return n("section",{staticClass:"k-layout",attrs:{"data-selected":t.isSelected,tabindex:"0"},on:{click:function(e){return t.$emit("select")}}},[n("k-grid",{staticClass:"k-layout-columns"},t._l(t.columns,function(e,i){return n("k-layout-column",t._b({key:e.id,on:{input:function(o){return t.$emit("updateColumn",{column:e,columnIndex:i,blocks:o})}}},"k-layout-column",{...e,endpoints:t.endpoints,fieldsetGroups:t.fieldsetGroups,fieldsets:t.fieldsets},!1))}),1),t.disabled?t._e():n("nav",{staticClass:"k-layout-toolbar"},[t.settings?n("k-button",{staticClass:"k-layout-toolbar-button",attrs:{title:t.$t("settings"),icon:"settings"},on:{click:t.openSettings}}):t._e(),n("k-button",{staticClass:"k-layout-toolbar-button",attrs:{icon:"angle-down"},on:{click:function(e){return t.$refs.options.toggle()}}}),n("k-dropdown-content",{ref:"options",attrs:{options:t.options,"align-x":"end"}}),n("k-sort-handle")],1)],1)},w=[],x=r($,C,w,!1,null,null,null,null);const u=x.exports,c={computed:{layoutEditingIsDisabled(){return this.$root.$language?!this.$root.$language.default&&this.isWithinTranslatedComponent:!1},isWithinTranslatedComponent(){let s=this;const t=["translatedblocks","translatedlayout"];for(;s!=this.$root&&s!=null;){if(s.type&&t.includes(s.type))return!0;s=s.$parent}return!1}}},it="",D={extends:u,components:{"k-layout-column":h},mixins:[c]};var E=function(){var t=this,n=t._self._c;return n("section",{staticClass:"k-layout",attrs:{"data-selected":t.isSelected,tabindex:"0"},on:{click:function(e){return t.$emit("select")}}},[n("k-grid",{staticClass:"k-layout-columns"},t._l(t.columns,function(e,i){return n("k-layout-column",t._b({key:e.id,attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets},on:{input:function(o){return t.$emit("updateColumn",{column:e,columnIndex:i,blocks:o})}}},"k-layout-column",e,!1))}),1),t.disabled?t._e():n("nav",{staticClass:"k-layout-toolbar"},[t.settings?n("k-button",{staticClass:"k-layout-toolbar-button",attrs:{tooltip:t.$t("settings"),icon:"settings"},on:{click:function(e){return t.$refs.drawer.open()}}}):t._e(),t.layoutEditingIsDisabled?t._e():n("k-dropdown",[n("k-button",{staticClass:"k-layout-toolbar-button",attrs:{icon:"angle-down"},on:{click:function(e){return t.$refs.options.toggle()}}}),n("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[n("k-dropdown-item",{attrs:{icon:"angle-up"},on:{click:function(e){return t.$emit("prepend")}}},[t._v(" "+t._s(t.$t("insert.before"))+" ")]),n("k-dropdown-item",{attrs:{icon:"angle-down"},on:{click:function(e){return t.$emit("append")}}},[t._v(" "+t._s(t.$t("insert.after"))+" ")]),n("hr"),t.settings?n("k-dropdown-item",{attrs:{icon:"settings"},on:{click:function(e){return t.$refs.drawer.open()}}},[t._v(" "+t._s(t.$t("settings"))+" ")]):t._e(),n("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(e){return t.$emit("duplicate")}}},[t._v(" "+t._s(t.$t("duplicate"))+" ")]),n("hr"),n("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(e){return t.$refs.confirmRemoveDialog.open()}}},[t._v(" "+t._s(t.$t("field.layout.delete"))+" ")])],1)],1),t.layoutEditingIsDisabled?t._e():n("k-sort-handle")],1),t.settings?n("k-form-drawer",{ref:"drawer",staticClass:"k-layout-drawer",attrs:{tabs:t.tabs,title:t.$t("settings"),value:t.attrs,icon:"settings"},on:{input:function(e){return t.$emit("updateAttrs",e)}}}):t._e(),n("k-remove-dialog",{ref:"confirmRemoveDialog",attrs:{text:t.$t("field.layout.delete.confirm")},on:{submit:function(e){return t.$emit("remove")}}})],1)},I=[],L=r(D,E,I,!1,null,null,null,null);const N=L.exports,at="",T={extends:u,components:{"k-translated-layout":N},mixins:[c],mounted:function(){this.addLayoutNative=u.methods.addLayout,this.removeLayoutNative=u.methods.removeLayout,this.duplicateLayoutNative=u.methods.duplicateLayout,this.selectLayoutNative=u.methods.selectLayout},methods:{async addLayout(s){return this.layoutEditingIsDisabled?null:this.addLayoutNative(s)},duplicateLayout(s,t){return this.layoutEditingIsDisabled?null:this.duplicateLayoutNative(s,t)},removeLayout(s){return this.layoutEditingIsDisabled?null:this.removeLayoutNative(s)},selectLayout(s){return this.layoutEditingIsDisabled?null:this.selectLayoutNative(s)}}};var A=function(){var t=this,n=t._self._c;return n("div",[t.rows.length?[n("k-draggable",t._b({staticClass:"k-layouts",on:{sort:t.save}},"k-draggable",t.draggableOptions,!1),t._l(t.rows,function(e,i){return n("k-translated-layout",t._b({key:e.id,attrs:{disabled:t.disabled,endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,"is-selected":t.selected===e.id,settings:t.settings},on:{append:function(o){return t.selectLayout(i+1)},duplicate:function(o){return t.duplicateLayout(i,e)},prepend:function(o){return t.selectLayout(i)},remove:function(o){return t.removeLayout(e)},select:function(o){t.selected=e.id},updateAttrs:function(o){return t.updateAttrs(i,o)},updateColumn:function(o){return t.updateColumn({layout:e,layoutIndex:i,...o})}}},"k-translated-layout",e,!1))}),1),t.layoutEditingIsDisabled?t._e():n("k-button",{staticClass:"k-layout-add-button",attrs:{icon:"add"},on:{click:function(e){return t.selectLayout(t.rows.length)}}})]:[n("k-empty",{staticClass:"k-layout-empty",attrs:{icon:"dashboard"},on:{click:function(e){return t.selectLayout(0)}}},[t._v(" "+t._s(t.empty||t.$t("field.layout.empty"))+" ")])],n("k-dialog",{ref:"selector",staticClass:"k-layout-selector",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[n("k-headline",[t._v(t._s(t.$t("field.layout.select")))]),n("ul",t._l(t.layouts,function(e,i){return n("li",{key:i,staticClass:"k-layout-selector-option"},[n("k-grid",{nativeOn:{click:function(o){return t.addLayout(e)}}},t._l(e,function(o,p){return n("k-column",{key:p,attrs:{width:o}})}),1)],1)}),0)],1)],2)},F=[],S=r(T,A,F,!1,null,null,null,null);const B=S.exports,lt="",R={extends:"k-layout-field",components:{"k-translated-block-layouts":B},mixins:[c]};var O=function(){var t=this,n=t._self._c;return n("k-field",t._b({class:{"k-translated-layout-field":!0,"k-layout-field":!0,"layouts-disabled":t.layoutEditingIsDisabled}},"k-field",t.$props,!1),[n("k-translated-block-layouts",t._b({on:{input:function(e){return t.$emit("input",e)}}},"k-translated-block-layouts",t.$props,!1))],1)},K=[],P=r(R,O,K,!1,null,null,null,null);const G=P.exports,rt="",j={extends:"k-blocks-field",components:{},mixins:[c]};var U=function(){var t=this,n=t._self._c;return n("k-field",t._b({class:{"k-blocks-field":!0,"k-translated-blocks-field":!0,"blocks-disabled":t.layoutEditingIsDisabled},scopedSlots:t._u([{key:"options",fn:function(){return[t.hasFieldsets&&!t.layoutEditingIsDisabled?n("k-dropdown",[n("k-button",{attrs:{icon:"dots"},on:{click:function(e){return t.$refs.options.toggle()}}}),n("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[n("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"add"},on:{click:function(e){return t.$refs.blocks.choose(t.value.length)}}},[t._v(" "+t._s(t.$t("add"))+" ")]),n("hr"),n("k-dropdown-item",{attrs:{disabled:t.isEmpty,icon:"template"},on:{click:function(e){return t.$refs.blocks.copyAll()}}},[t._v(" "+t._s(t.$t("copy.all"))+" ")]),n("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"download"},on:{click:function(e){return t.$refs.blocks.pasteboard()}}},[t._v(" "+t._s(t.$t("paste"))+" ")]),n("hr"),n("k-dropdown-item",{attrs:{disabled:t.isEmpty,icon:"trash"},on:{click:function(e){return t.$refs.blocks.confirmToRemoveAll()}}},[t._v(" "+t._s(t.$t("delete.all"))+" ")])],1)],1):t._e()]},proxy:!0}])},"k-field",t.$props,!1),[t.layoutEditingIsDisabled&&t.isEmpty?n("k-empty",{staticClass:"k-blocks-empty",attrs:{icon:"box"}},[t._v(" "+t._s(t.empty||t.$t("field.blocks.empty"))+" ")]):n("k-blocks",t._g({ref:"blocks",attrs:{autofocus:t.autofocus,compact:!1,empty:t.empty,endpoints:t.endpoints,fieldsets:t.fieldsets,"fieldset-groups":t.fieldsetGroups,group:t.group,max:t.max,value:t.value},on:{close:function(e){t.opened=e},open:function(e){t.opened=e}}},t.$listeners)),!t.isEmpty&&!t.isFull&&!t.layoutEditingIsDisabled?n("k-button",{staticClass:"k-field-add-item-button",attrs:{icon:"add",tooltip:t.$t("add")},on:{click:function(e){return t.$refs.blocks.choose(t.value.length)}}}):t._e()],1)},W=[],H=r(j,U,W,!1,null,null,null,null);const z=H.exports,dt="";var M=r({extends:"k-blocks",name:"k-blocks",mixins:[c],props:{_devInfo:{type:String,default:"Warning: I'm not the default k-blocks. I have been replaced by a k-translated-blocks !"}},mounted(){this.invertCustomAndNativeFunctions(["choose","addToBatch","onKey","onPaste","paste","pasteboard","append","remove","removeAll","convert","move","copyAll","duplicate","chooseToConvert","add","removeAll","removeSelected"])},methods:{invertCustomAndNativeFunctions(s){for(const t of s)this[t+"Native"]||(this[t+"Native"]=this[t],this[t]=this[t+"Custom"])},chooseCustom(s){return this.layoutEditingIsDisabled?null:this.chooseNative(s)},addToBatchCustom(s){return this.layoutEditingIsDisabled?null:this.addToBatchNative(s)},onKeyCustom(s,t=null){if(this.layoutEditingIsDisabled){this.isMultiSelectKey=!1;return}this.onKeyNative(s,t)},onPasteCustom(s){return this.layoutEditingIsDisabled?(s.preventDefault(),s.stopImmediatePropagation(),!1):this.pasteNative(s)},async pasteCustom(s){return this.layoutEditingIsDisabled?(s.preventDefault(),s.stopImmediatePropagation(),!1):this.pasteNative(s)},pasteboardCustom(){return this.layoutEditingIsDisabled?!1:this.pasteboardNative()},appendCustom(s,t){return this.layoutEditingIsDisabled?null:this.appendNative(s,t)},removeCustom(s){return this.layoutEditingIsDisabled?null:this.removeNative(s)},async convertCustom(s,t){return this.layoutEditingIsDisabled?null:this.convertNative(s,t)},chooseToConvert(s){return this.layoutEditingIsDisabled?null:this.chooseToConvert(s)},moveCustom(s){return this.layoutEditingIsDisabled?null:this.moveNative(s)},copyAllCustom(){return this.layoutEditingIsDisabled?null:this.copyAllNative()},async duplicateCustom(s,t){return this.layoutEditingIsDisabled?null:this.duplicateNative(s,t)},async addCustom(s="text",t){return this.layoutEditingIsDisabled?null:this.addNative(s,t)},removeAllCustom(){return this.layoutEditingIsDisabled?null:this.removeAllNative()},removeSelectedCustom(){return this.layoutEditingIsDisabled?null:this.removeSelectedNative()}}},null,null,!1,null,null,null,null);const V=M.exports,ft="",X={extends:"k-block",mixins:[c],props:{_devInfo:{type:String,default:"Warning: I'm not the default k-block. I have been replaced by a k-translated-block !"}}};var q=function(){var t=this,n=t._self._c;return n("div",{ref:"container",staticClass:"k-block-container",class:"k-block-container-type-"+t.type,attrs:{"data-batched":t.isBatched,"data-disabled":t.fieldset.disabled,"data-hidden":t.isHidden,"data-id":t.id,"data-last-in-batch":t.isLastInBatch,"data-selected":t.isSelected,"data-translate":t.fieldset.translate,tabindex:"0"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||!e.ctrlKey||!e.shiftKey?null:(e.preventDefault(),t.$emit("sortDown"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||!e.ctrlKey||!e.shiftKey?null:(e.preventDefault(),t.$emit("sortUp"))}],focus:function(e){return t.$emit("focus")},focusin:t.onFocusIn}},[n("div",{staticClass:"k-block",class:t.className},[n(t.customComponent,t._g(t._b({ref:"editor",tag:"component"},"component",t.$props,!1),t.listeners))],1),t.layoutEditingIsDisabled&&t.isEditable?n("k-dropdown",{staticClass:"k-block-options"},[t.isEditable?n("k-button",{staticClass:"k-block-options-button",attrs:{tooltip:t.$t("edit"),icon:"edit"},on:{click:t.open}}):t._e()],1):n("k-block-options",t._g({ref:"options",attrs:{"is-batched":t.isBatched,"is-editable":t.isEditable,"is-full":t.isFull,"is-hidden":t.isHidden}},t.listeners)),t.isEditable&&!t.isBatched?n("k-form-drawer",{ref:"drawer",staticClass:"k-block-drawer",attrs:{id:t.id,icon:t.fieldset.icon||"box",tabs:t.tabs,title:t.fieldset.name,value:t.content},on:{close:function(e){return t.focus()},input:function(e){return t.$emit("update",e)}},scopedSlots:t._u([{key:"options",fn:function(){return[t.isHidden?n("k-button",{staticClass:"k-drawer-option",attrs:{icon:"hidden"},on:{click:function(e){return t.$emit("show")}}}):t._e(),n("k-button",{staticClass:"k-drawer-option",attrs:{disabled:!t.prev,icon:"angle-left"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goTo(t.prev)}}}),n("k-button",{staticClass:"k-drawer-option",attrs:{disabled:!t.next,icon:"angle-right"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goTo(t.next)}}}),n("k-button",{staticClass:"k-drawer-option",attrs:{icon:"trash"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.confirmToRemove.apply(null,arguments)}}})]},proxy:!0}],null,!1,2211169536)}):t._e(),n("k-remove-dialog",{ref:"removeDialog",attrs:{text:t.$t("field.blocks.delete.confirm")},on:{submit:t.remove}})],1)},J=[],Q=r(X,q,J,!1,null,null,null,null);const Y=Q.exports;panel.plugin("daandelange/translatedlayout",{components:{"k-block":Y,"k-blocks":V},fields:{translatedlayout:G,translatedblocks:z}})})();
